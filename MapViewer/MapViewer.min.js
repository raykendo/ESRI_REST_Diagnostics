(function(){var h=document,a=window.location.href.replace(window.location.search,""),k=/(map|feature)server\/?$/i.test(a),g=false,b="//js.arcgis.com/3.15compact",f="//js.arcgis.com/3.15/esri/css/esri.css",j,i;function c(d,m){var n=h.createElement(d),l;for(l in m){n.setAttribute(l,m[l])}return n}function e(){var d=c("div",{style:"position:fixed;top:0;right:0;border:1px solid grey;z-index:10;padding:8px;background:#fff;"});d.innerHTML="<div id='map'></div>"+(!k?"<p>Hover over a Map Service link to view it.</p>":"");h.body.appendChild(d);require(["esri/map","esri/request","dojo/query","dojo/domReady!"],function(m,q,o){var p=new m("map");function l(t,s){if(t.layers&&t.layers.length){require(["esri/layers/FeatureLayer","dojo/_base/array"],function(v,u){u.forEach(t.layers,function(x){var w=new v(s.replace(/\/?$/,"/"+x.id),{mode:v.MODE_SNAPSHOT,outFields:["*"]});p.addLayer(w)})})}}function r(t,s){if(t.singleFusedMapCache){require(["esri/layers/ArcGISTiledMapServiceLayer"],function(u){var v=new u(s);p.addLayer(v)})}else{require(["esri/layers/ArcGISDynamicMapServiceLayer"],function(v){var u=new v(s);p.addLayer(u)})}}function n(){if(p.graphicsLayerIds.length+p.layerIds.length>0){p.destroy();p=new m("map")}}if(k){r(a)}else{o("a[href$=MapServer]").on("mouseover",function(s){var t=s.currentTarget.href;n();q({url:t,handleAs:"json",content:{f:"json"}}).then(function(u){r(u,t)},function(u){console.error(u)})});o("a[href$=FeatureServer]").on("mouseover",function(s){var t=s.currentTarget.href;n();q({url:t,handleAs:"json",content:{f:"json"}}).then(function(u){l(u,t)},function(u){console.error(u)})})}})}g=[].some.call(h.getElementsByTagName("script"),function(d){return d.src===b});if(g){e()}else{j=c("link",{rel:"stylesheet",type:"text/css",href:f});h.head.appendChild(j);i=c("script",{type:"text/javascript"});i.onload=e;i.setAttribute("src",b);h.body.appendChild(i)}}());